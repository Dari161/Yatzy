document.addEventListener('DOMContentLoaded',(()=>{const e=document.getElementById('roll'),t=document.getElementById('score'),a=document.getElementById('rollsLeft'),n=Array.from(document.getElementById('hand').children);let l=n.map((e=>parseInt(e.innerText)));const d=new Array(6);for(let e=0;e<d.length;++e)d[e]=document.getElementById(`${e+1}`);const c=document.getElementById('3x'),r=document.getElementById('4x'),o=document.getElementById('5x'),s=document.getElementById('fullHouse'),i=document.getElementById('largeStraight');let f=3;a.innerText=f;let p=0,m=!1;n.forEach((e=>{e.addEventListener('click',(()=>{m&&(e.dataset.locked=!('true'===e.dataset.locked))}))})),[...d,c,r,o,s,i].forEach((l=>{l.addEventListener('click',(()=>{m&&'true'===l.dataset.placable&&(p+=parseInt(l.innerText),l.dataset.placable='placed',f=3,a.innerText=f,e.disabled=!1,t.innerText=p,n.forEach((e=>{e.innerHTML='',e.dataset.locked='false'})),[...d,c,r,o,s,i].forEach((e=>{'placed'!=e.dataset.placable&&(e.innerHTML='',e.dataset.placable='false')})),n.forEach((e=>{e.innerText=''})),m=!1)}))})),e.addEventListener('click',(()=>{if(f>0){--f,a.innerText=f,n.forEach((e=>{'false'===e.dataset.locked&&(e.innerText=Math.floor(6*Math.random())+1)})),l=n.map((e=>parseInt(e.innerText)));for(let e=0;e<d.length;++e)if('placed'!=d[e].dataset.placable){let t=0;l.forEach((a=>{a==e+1&&(t+=e+1)})),d[e].innerText=t}let t=new Array(6).fill(0);l.forEach((e=>{++t[e-1]}));let p=0,E=0,h=0,x=!1,T=!1,g=0;l.forEach((e=>{g+=e}));for(let e=0;e<t.length;++e){if(t[e]>=3&&(p=g,t[e]>=4&&(E=g,t[e]>=5))){h=g;break}3==t[e]?x=!0:2==t[e]&&(T=!0)}if('placed'!=c.dataset.placable&&(c.innerText=p),'placed'!=r.dataset.placable&&(r.innerText=E),'placed'!=o.dataset.placable&&(o.innerText=h),'placed'!=s.dataset.placable&&(s.innerText=x&&T?25:0),'placed'!=i.dataset.placable){const e=t.filter((e=>e>=1)).length;i.innerText=e>=5?40:0}[...d,c,r,o,s,i].forEach((e=>{'placed'!=e.dataset.placable&&(e.dataset.placable='true')})),m=!0,f<1&&(e.disabled=!0)}}))}));